!function(e){function t(t){for(var r,u,i=t[0],c=t[1],l=t[2],f=0,d=[];f<i.length;f++)u=i[f],a[u]&&d.push(a[u][0]),a[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(s&&s(t);d.length;)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={2:0},o=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=c;o.push([1,0]),n()}({1:function(e,t,n){"use strict";n.r(t);n(8);var r=n(2);!function(){var e=r.select("#vis-box").append("svg").style("background","#a8bcc7").style("border","1px solid #000").attr("width",1200).attr("height",750).append("g").attr("class","map"),t=r.geoMercator().scale(190).translate([600,475]),n=r.geoPath().projection(t),a=function(){var e=r.select("#vis-box").append("div").attr("class","tooltip"),t=5,n=5;function a(r,a){var o=window.innerWidth,u=window.innerHeight,i=e.node().offsetWidth,c=e.node().offsetHeight;return r+i>o?r-=i+t:r+=t,a+c>u?a-=c+n:a+=n,[r,a]}return{update:function(t,n,o){e.style("display","block"),e.transition().duration(500).ease(r.easeCubicOut).style("opacity",.7),e.html("<h2>Home:".concat(o.value.home,"</h2>\n          <ul>\n            <li>Year:").concat(o.key,"</li>\n            <li>Total Attendance: ").concat(o.value.attendance,"</li>\n            <li>Team Number: ").concat(o.value.teamNumber,"</li>\n          </ul>"));var u=a(t,n);e.style("left",u[0]+"px").style("top",u[1]+"px")},off:function(){e.transition().duration(300).on("end",function(){e.style("display","none")}).ease(r.easeCubicOut).style("opacity",0)},move:function(t,n){var r=a(t,n);e.style("left",r[0]+"px").style("top",r[1]+"px")}}}(),o=function(){var t=void 0,r="#f3e3d4",a="#a8bcc7";return{init:function(o){return t=e.selectAll("path").data(o.features).enter().append("path").attr("fill",r).attr("stroke",a).attr("stroke-width",.5).attr("d",n)},highlight:function(e){return t.transition().duration(500).style("fill",function(t){return e.has(t.properties.name)?"rgb(212, 88, 88)":r}),t},reset:function(){t.transition().duration(300).style("fill",r).style("stroke",a)}}}(),u=function(){var t=void 0,n=void 0,a=void 0,o=void 0,u=void 0;return{init:function(i,c,l){n=c,u=l;var s=r.extent(i,function(e){return e.value.attendance});return t=r.scaleSqrt().domain(s).range([4,20]),a=e.append("g").attr("class","bubbles"),o=a.selectAll("circle").data(i,n).enter().append("circle").attr("r",function(e){return t(e.value.attendance)}).attr("cx",function(e){return e.value.x}).attr("cy",function(e){return e.value.y}),u&&u(o),o},render:function(e){var r=a.selectAll("circle").data(e,n);return r.exit().remove(),(o=r.enter().append("circle").merge(r).attr("cx",function(e){return e.value.x}).attr("cy",function(e){return e.value.y})).transition().duration(500).attr("r",function(e){return t(e.value.attendance)}),u&&u(o),o}}}();function i(e){var n=function(e){return r.nest().key(function(e){return e.date.getUTCFullYear()}).rollup(function(e){var n=r.sum(e,function(e){return e.attendance}),a=e.map(function(e){return t([+e.long,+e.lat])}),o=r.mean(a,function(e){return e[0]}),u=r.mean(a,function(e){return e[1]}),i=r.set();return e.forEach(function(e){i.add(e.team1),i.add(e.team2)}),{attendance:n,x:o,y:u,teams:i,home:e[0].home,year:e[0].year,teamNumber:i.size()}}).entries(e)}(e);u.init(n.sort(function(e,t){return t.value.attendance-e.value.attendance}),function(e){return e.key},function(e){e.on("mouseover",function(e){a.update(r.event.pageX,r.event.pageY,e);var t=n.filter(function(t){return new Date(t.key).getFullYear()===parseInt(e.key)});o.highlight(t[0].value.teams)}).on("mousemove",function(e){a.move(r.event.pageX,r.event.pageY)}).on("mouseout",function(e){a.off(),o.reset()})});var i=function(e,t,n){for(var r=[],a=e;a<=t;a+=n)1942!==a&&1946!==a&&r.push(a);return r}(1930,2015,4);r.select("#vis-box").append("ul").attr("class","button__list-row").selectAll("li").data(i).enter().append("li").attr("class","button").append("button").text(function(e){return e}).on("mouseover",function(e){var t=n.filter(function(t){return new Date(t.key).getFullYear()===e});o.highlight(t[0].value.teams),u.render(t)}).on("mouseout",function(){o.reset(),u.render(n).on("mouseover",function(e){a.update(r.event.pageX,r.event.pageY,e);var t=n.filter(function(t){return new Date(t.key).getFullYear()===parseInt(e.key)});o.highlight(t[0].value.teams)}).on("mousemove",function(e){a.move(r.event.pageX,r.event.pageY)}).on("mouseout",function(e){a.off(),o.reset()})})}r.json("../assets/world_countries.json").then(function(e){!function(e){o.init(e);var t=r.timeParse("%d-%m-%Y (%H:%M h)");r.tsv("../assets/world_cup/world_cup_geo.tsv",function(e){var n=t(e.date);return e.attendance=+e.attendance,e.date=n,e}).then(function(e){i(e)})}(e)})}()},8:function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL3dvcmxkX2N1cC9zY3JpcHRzL21haW4uanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIyIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiZDMiLCJyZXF1aXJlIiwic3ZnIiwic2VsZWN0IiwiYXBwZW5kIiwic3R5bGUiLCJhdHRyIiwid2lkdGgiLCJoZWlnaHQiLCJwcm9qZWN0aW9uIiwiZ2VvTWVyY2F0b3IiLCJzY2FsZSIsInRyYW5zbGF0ZSIsInBhdGgiLCJnZW9QYXRoIiwidG9vbHRpcCIsImRvbSIsIm9mZnNldF94Iiwib2Zmc2V0X3kiLCJjYWxjdWxhdGVQb3MiLCJ4IiwieSIsInZpZXdQb3J0V2lkdGgiLCJpbm5lcldpZHRoIiwidmlld1BvcnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImRvbVdpZHRoIiwibm9kZSIsIm9mZnNldFdpZHRoIiwiZG9tSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwidXBkYXRlIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiZWFzZSIsImVhc2VDdWJpY091dCIsImh0bWwiLCJjb25jYXQiLCJob21lIiwiYXR0ZW5kYW5jZSIsInRlYW1OdW1iZXIiLCJwb3MiLCJvZmYiLCJvbiIsIm1vdmUiLCJtYXAiLCJfbWFwIiwidW5kZWZpbmVkIiwiZmlsbCIsInN0cm9rZSIsImluaXQiLCJnZW9fZGF0YSIsInNlbGVjdEFsbCIsImZlYXR1cmVzIiwiZW50ZXIiLCJoaWdobGlnaHQiLCJzZXQiLCJoYXMiLCJwcm9wZXJ0aWVzIiwicmVzZXQiLCJwb2ludCIsIl9yYWRpdXMiLCJfa2V5X2Z1bmMiLCJfcGFyZW50IiwiX3BvaW50IiwiX2V2ZW50SGFuZGxlciIsImtleV9mdW5jIiwiZXZlbnRIYW5kbGVyIiwiZXh0ZW50Iiwic2NhbGVTcXJ0IiwiZG9tYWluIiwicmFuZ2UiLCJyZW5kZXIiLCJleGl0IiwicmVtb3ZlIiwibWVyZ2UiLCJwbG90X3BvaW50IiwibmVzdGVkIiwibmVzdCIsImdldFVUQ0Z1bGxZZWFyIiwicm9sbHVwIiwiZ3JvdXAiLCJ0b3RhbCIsInN1bSIsImNvb3JkcyIsImNlbnRlcl94IiwibWVhbiIsImNlbnRlcl95IiwidGVhbSIsImZvckVhY2giLCJhZGQiLCJ0ZWFtcyIsInllYXIiLCJzaXplIiwiZW50cmllcyIsIm5lc3RlZERhdGEiLCJzb3J0IiwiYSIsImIiLCJwb2ludHMiLCJldmVudCIsInBhZ2VYIiwicGFnZVkiLCJmaWx0ZXJlZCIsImZpbHRlciIsImQxIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwicGFyc2VJbnQiLCJ5ZWFycyIsInN0YXJ0IiwiZW5kIiwic3RlcCIsInBvcHVsYXRlX3llYXIiLCJ0ZXh0IiwianNvbiIsInRoZW4iLCJnZW9fanNvbiIsImZvcm1hdCIsInRpbWVQYXJzZSIsInRzdiIsImRhdGUiLCJkcmF3Il0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxFQUFBQyxHQVFBLElBUEEsSUFNQUMsRUFBQUMsRUFOQUMsRUFBQUgsRUFBQSxHQUNBSSxFQUFBSixFQUFBLEdBQ0FLLEVBQUFMLEVBQUEsR0FJQU0sRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBS0EsSUFGQWUsS0FBQWhCLEdBRUFPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFBQUQsRUFBQWIsT0FHQWUsSUFFQSxTQUFBQSxJQUVBLElBREEsSUFBQUMsRUFDQWYsRUFBQSxFQUFpQkEsRUFBQVksRUFBQVYsT0FBNEJGLElBQUEsQ0FHN0MsSUFGQSxJQUFBZ0IsRUFBQUosRUFBQVosR0FDQWlCLEdBQUEsRUFDQUMsRUFBQSxFQUFrQkEsRUFBQUYsRUFBQWQsT0FBMkJnQixJQUFBLENBQzdDLElBQUFDLEVBQUFILEVBQUFFLEdBQ0EsSUFBQWYsRUFBQWdCLEtBQUFGLEdBQUEsR0FFQUEsSUFDQUwsRUFBQVEsT0FBQXBCLElBQUEsR0FDQWUsRUFBQU0sSUFBQUMsRUFBQU4sRUFBQSxLQUdBLE9BQUFELEVBSUEsSUFBQVEsS0FLQXBCLEdBQ0FxQixFQUFBLEdBR0FaLEtBR0EsU0FBQVMsRUFBQTFCLEdBR0EsR0FBQTRCLEVBQUE1QixHQUNBLE9BQUE0QixFQUFBNUIsR0FBQThCLFFBR0EsSUFBQUMsRUFBQUgs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R0FDekIwQyxFQUFRZ0IsT0FBTy9CLEVBQUdvRyxNQUFNQyxNQUFPckcsRUFBR29HLE1BQU1FLE1BQU9qSSxHQUMvQyxJQUFJa0ksRUFBVzFCLEVBQU8yQixPQUFPLFNBQVVDLEdBQ3JDLE9BQU8sSUFBSUMsS0FBS0QsRUFBRSxLQUFTRSxnQkFBa0JDLFNBQVN2SSxFQUFFZ0IsT0FFMUR3RCxFQUFJVSxVQUFVZ0QsRUFBUyxHQUFHeEgsTUFBWixTQUVmNEQsR0FBRyxZQUFhLFNBQVV0RSxHQUN6QjBDLEVBQVE2QixLQUFLNUMsRUFBR29HLE1BQU1DLE1BQU9yRyxFQUFHb0csTUFBTUUsU0FFdkMzRCxHQUFHLFdBQVksU0FBVXRFLEdBQ3hCMEMsRUFBUTJCLE1BQ1JHLEVBQUljLFlBb0JkM0QsRUFBR21ILEtBQUssa0NBQWtDQyxLQUFLLFNBQUFuTCxJQWYvQyxTQUFjb0wsR0FDWnhFLEVBQUlLLEtBQUttRSxHQUNULElBQUlDLEVBQVN0SCxFQUFHdUgsVUFBVSxzQkFFMUJ2SCxFQUFHd0gsSUFBSSx3Q0FBeUMsU0FBVW5KLEdBQ3hELElBQUlvSixFQUFPSCxFQUFPakosRUFBQyxNQUduQixPQUZBQSxFQUFDLFlBQWtCQSxFQUFDLFdBQ3BCQSxFQUFDLEtBQVdvSixFQUNMcEosSUFDTitJLEtBQUssU0FBQW5MLEdBQ04ySSxFQUFXM0ksS0FNYnlMLENBQUt6TCxLQWhWVCIsImZpbGUiOiJ3b3JsZF9jdXAvYXBwbGljYXRpb24ud29ybGRfY3VwLmU1YTYyMjdkYWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQyOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFsxLDBdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiLyplc2xpbnQgbm8tdW5kZWY6IDIqL1xyXG5jb25zdCBkMyA9IHJlcXVpcmUoXCJkM1wiKTtcclxuaW1wb3J0IFwiLi4vc3R5bGVzaGVldHMvc3R5bGUuc2Nzc1wiO1xyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBzdGFydCB7TnVtYmVyfVxyXG4gKiBAcGFyYW0gZW5kIHtOdW1iZXJ9XHJcbiAqIEBwYXJhbSBzdGVwIHtOdW1iZXJ9XHJcbiAqIEByZXR1cm5zIHtBcnJheX1cclxuICovXHJcbmZ1bmN0aW9uIHBvcHVsYXRlX3llYXIoc3RhcnQsIGVuZCwgc3RlcCkge1xyXG4gIGxldCB5ZWFycyA9IFtdO1xyXG4gIGZvciAobGV0IHllYXIgPSBzdGFydDsgeWVhciA8PSBlbmQ7IHllYXIgKz0gc3RlcCkge1xyXG4gICAgaWYgKHllYXIgPT09IDE5NDIgfHwgeWVhciA9PT0gMTk0Nikge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICAgIHllYXJzLnB1c2goeWVhcik7XHJcbiAgfVxyXG4gIHJldHVybiB5ZWFycztcclxufVxyXG5cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgbGV0IG1hcmdpbiA9IDAsXHJcbiAgICB3aWR0aCA9IDEyMDAgLSBtYXJnaW4sXHJcbiAgICBoZWlnaHQgPSA3NTAgLSBtYXJnaW47XHJcblxyXG4gIGxldCBzdmcgPSBkMy5zZWxlY3QoXCIjdmlzLWJveFwiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgXCIjYThiY2M3XCIpXHJcbiAgICAuc3R5bGUoXCJib3JkZXJcIiwgXCIxcHggc29saWQgIzAwMFwiKVxyXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbilcclxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbilcclxuICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAuYXR0cihcImNsYXNzXCIsIFwibWFwXCIpO1xyXG5cclxuXHJcbiAgLy8g55So5p2l5bCG57uP57qs5bqm6L2s5o2i5Li65bGP5bmV5LiK55qE5YOP57Sg44CCXHJcbiAgbGV0IHByb2plY3Rpb24gPSBkMy5nZW9NZXJjYXRvcigpLnNjYWxlKDE5MCkudHJhbnNsYXRlKFt3aWR0aCAvIDIsIGhlaWdodCAvIDIgKyAxMDBdKTtcclxuICBsZXQgcGF0aCA9IGQzLmdlb1BhdGgoKS5wcm9qZWN0aW9uKHByb2plY3Rpb24pO1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVG9vbHRpcCBjb250cm9sbGVyXHJcbiAgICogQHR5cGUge3t1cGRhdGUsIG9mZiwgbW92ZX19XHJcbiAgICovXHJcbiAgbGV0IHRvb2x0aXAgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGRvbSA9IGQzLnNlbGVjdChcIiN2aXMtYm94XCIpLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0b29sdGlwXCIpO1xyXG4gICAgbGV0IG9mZnNldF94ID0gNTtcclxuICAgIGxldCBvZmZzZXRfeSA9IDU7XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUG9zKHgsIHkpIHtcclxuXHJcbiAgICAgIGxldCB2aWV3UG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgdmlld1BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgICAgZG9tV2lkdGggPSBkb20ubm9kZSgpLm9mZnNldFdpZHRoLFxyXG4gICAgICAgIGRvbUhlaWdodCA9IGRvbS5ub2RlKCkub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHggKyBkb21XaWR0aCA+IHZpZXdQb3J0V2lkdGgpIHtcclxuICAgICAgICB4IC09IChkb21XaWR0aCArIG9mZnNldF94KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB4ICs9IG9mZnNldF94O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh5ICsgZG9tSGVpZ2h0ID4gdmlld1BvcnRIZWlnaHQpIHtcclxuICAgICAgICB5IC09IChkb21IZWlnaHQgKyBvZmZzZXRfeSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeSArPSBvZmZzZXRfeTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gW3gsIHldO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZSh4LCB5LCBkYXRhKSB7XHJcbiAgICAgIG9uKCk7XHJcbiAgICAgIGRvbS50cmFuc2l0aW9uKClcclxuICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgIC5lYXNlKGQzLmVhc2VDdWJpY091dClcclxuICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIC43KTtcclxuXHJcbiAgICAgIGRvbS5odG1sKFxyXG4gICAgICAgIGA8aDI+SG9tZToke2RhdGEudmFsdWUuaG9tZX08L2gyPlxyXG4gICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICA8bGk+WWVhcjoke2RhdGEua2V5fTwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5Ub3RhbCBBdHRlbmRhbmNlOiAke2RhdGEudmFsdWUuYXR0ZW5kYW5jZX08L2xpPlxyXG4gICAgICAgICAgICA8bGk+VGVhbSBOdW1iZXI6ICR7ZGF0YS52YWx1ZS50ZWFtTnVtYmVyfTwvbGk+XHJcbiAgICAgICAgICA8L3VsPmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGxldCBwb3MgPSBjYWxjdWxhdGVQb3MoeCwgeSk7XHJcbiAgICAgIGRvbS5zdHlsZShcImxlZnRcIiwgKHBvc1swXSkgKyBcInB4XCIpXHJcbiAgICAgICAgLnN0eWxlKFwidG9wXCIsIChwb3NbMV0pICsgXCJweFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb3ZlKHgsIHkpIHtcclxuICAgICAgbGV0IHBvcyA9IGNhbGN1bGF0ZVBvcyh4LCB5KTtcclxuICAgICAgZG9tLnN0eWxlKFwibGVmdFwiLCAocG9zWzBdKSArIFwicHhcIilcclxuICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKHBvc1sxXSkgKyBcInB4XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9mZigpIHtcclxuICAgICAgZG9tLnRyYW5zaXRpb24oKVxyXG4gICAgICAgIC5kdXJhdGlvbigzMDApXHJcbiAgICAgICAgLm9uKFwiZW5kXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGRvbS5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVhc2UoZDMuZWFzZUN1YmljT3V0KVxyXG4gICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgLjApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uKCkge1xyXG4gICAgICBkb20uc3R5bGUoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXBkYXRlLFxyXG4gICAgICBvZmYsXHJcbiAgICAgIG1vdmVcclxuICAgIH07XHJcbiAgfSgpKTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcCBjb250cm9sbGVyXHJcbiAgICogQ2FsbCBpbml0IHdpdGggZ2VvSnNvbiBkYXRhIHRvIGluaXRpYWxpemF0aW9uIHRoZSBtYXAuXHJcbiAgICogQHR5cGUge3tpbml0LCBoaWdobGlnaHR9fVxyXG4gICAqL1xyXG4gIGxldCBtYXAgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IF9tYXAgPSB1bmRlZmluZWQsXHJcbiAgICAgIGZpbGwgPSBcIiNmM2UzZDRcIixcclxuICAgICAgc3Ryb2tlID0gXCIjYThiY2M3XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdChnZW9fZGF0YSkge1xyXG4gICAgICBfbWFwID0gc3ZnLnNlbGVjdEFsbChcInBhdGhcIilcclxuICAgICAgICAuZGF0YShnZW9fZGF0YS5mZWF0dXJlcylcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIGZpbGwpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgc3Ryb2tlKVxyXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDAuNSlcclxuICAgICAgICAuYXR0cihcImRcIiwgcGF0aCk7XHJcbiAgICAgIHJldHVybiBfbWFwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodChzZXQpIHtcclxuICAgICAgX21hcC50cmFuc2l0aW9uKClcclxuICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgIGlmIChzZXQuaGFzKGQucHJvcGVydGllcy5uYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJyZ2IoMjEyLCA4OCwgODgpXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmlsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgcmV0dXJuIF9tYXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgIF9tYXAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgLmR1cmF0aW9uKDMwMClcclxuICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZpbGwpXHJcbiAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIHN0cm9rZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW5pdCxcclxuICAgICAgaGlnaGxpZ2h0LFxyXG4gICAgICByZXNldFxyXG4gICAgfTtcclxuICB9KCkpO1xyXG5cclxuXHJcbiAgbGV0IHBvaW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBfcmFkaXVzID0gdW5kZWZpbmVkO1xyXG4gICAgbGV0IF9rZXlfZnVuYyA9IHVuZGVmaW5lZDtcclxuICAgIGxldCBfcGFyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgbGV0IF9wb2ludCA9IHVuZGVmaW5lZDtcclxuICAgIGxldCBfZXZlbnRIYW5kbGVyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoZGF0YSwga2V5X2Z1bmMsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICBfa2V5X2Z1bmMgPSBrZXlfZnVuYztcclxuICAgICAgX2V2ZW50SGFuZGxlciA9IGV2ZW50SGFuZGxlcjtcclxuICAgICAgLy8gRmluZCBtaW4gYW5kIG1heFxyXG4gICAgICBsZXQgZXh0ZW50ID0gZDMuZXh0ZW50KGRhdGEsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQudmFsdWVbXCJhdHRlbmRhbmNlXCJdO1xyXG4gICAgICB9KTtcclxuICAgICAgX3JhZGl1cyA9IGQzLnNjYWxlU3FydCgpLmRvbWFpbihleHRlbnQpLnJhbmdlKFs0LCAyMF0pO1xyXG5cclxuICAgICAgX3BhcmVudCA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJ1YmJsZXNcIik7XHJcblxyXG4gICAgICBfcG9pbnQgPSBfcGFyZW50LnNlbGVjdEFsbChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5kYXRhKGRhdGEsIF9rZXlfZnVuYylcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAuYXR0cihcInJcIiwgZCA9PiBfcmFkaXVzKGQudmFsdWUuYXR0ZW5kYW5jZSkpXHJcbiAgICAgICAgLmF0dHIoXCJjeFwiLCBkID0+IGQudmFsdWUueClcclxuICAgICAgICAuYXR0cihcImN5XCIsIGQgPT4gZC52YWx1ZS55KTtcclxuXHJcbiAgICAgIF9ldmVudEhhbmRsZXIgJiYgX2V2ZW50SGFuZGxlcihfcG9pbnQpO1xyXG4gICAgICByZXR1cm4gX3BvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbmRlcihkYXRhKSB7XHJcbiAgICAgIGxldCBwb2ludCA9IF9wYXJlbnQuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmRhdGEoZGF0YSwgX2tleV9mdW5jKTtcclxuICAgICAgLy8gZGVidWdnZXJcclxuICAgICAgcG9pbnQuZXhpdCgpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgX3BvaW50ID0gcG9pbnQuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAubWVyZ2UocG9pbnQpXHJcbiAgICAgICAgLmF0dHIoXCJjeFwiLCBkID0+IGQudmFsdWUueClcclxuICAgICAgICAuYXR0cihcImN5XCIsIGQgPT4gZC52YWx1ZS55KVxyXG5cclxuXHJcbiAgICAgIF9wb2ludC50cmFuc2l0aW9uKClcclxuICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCBkID0+IF9yYWRpdXMoZC52YWx1ZS5hdHRlbmRhbmNlKSk7XHJcbiAgICAgIF9ldmVudEhhbmRsZXIgJiYgX2V2ZW50SGFuZGxlcihfcG9pbnQpO1xyXG4gICAgICByZXR1cm4gX3BvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGluaXQsXHJcbiAgICAgIHJlbmRlclxyXG4gICAgfVxyXG4gIH0oKSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBuZXN0ZWQgZGF0YVxyXG4gICAqIEBwYXJhbSBkYXRhXHJcbiAgICogQHJldHVybnMgeyp9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gbmVzdGVkRGF0YShkYXRhKSB7XHJcbiAgICAvLyDmlbDmja7ogZrlkIhcclxuICAgIHJldHVybiBkMy5uZXN0KClcclxuICAgICAgLmtleShmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgIHJldHVybiBkW1wiZGF0ZVwiXS5nZXRVVENGdWxsWWVhcigpO1xyXG4gICAgICB9KVxyXG4gICAgICAucm9sbHVwKGZ1bmN0aW9uIChncm91cCkge1xyXG4gICAgICAgIGxldCB0b3RhbCA9IGQzLnN1bShncm91cCwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgIHJldHVybiBkW1wiYXR0ZW5kYW5jZVwiXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdyb3VwLm1hcChmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHByb2plY3Rpb24oWytkW1wibG9uZ1wiXSwgK2RbXCJsYXRcIl1dKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgY2VudGVyX3ggPSBkMy5tZWFuKGNvb3JkcywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgIHJldHVybiBkWzBdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBjZW50ZXJfeSA9IGQzLm1lYW4oY29vcmRzLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGRbMV07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCB0ZWFtID0gZDMuc2V0KCk7XHJcbiAgICAgICAgZ3JvdXAuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgdGVhbS5hZGQoZFtcInRlYW0xXCJdKTtcclxuICAgICAgICAgIHRlYW0uYWRkKGRbXCJ0ZWFtMlwiXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBhdHRlbmRhbmNlOiB0b3RhbCxcclxuICAgICAgICAgIHg6IGNlbnRlcl94LFxyXG4gICAgICAgICAgeTogY2VudGVyX3ksXHJcbiAgICAgICAgICB0ZWFtczogdGVhbSxcclxuICAgICAgICAgIGhvbWU6IGdyb3VwWzBdLmhvbWUsXHJcbiAgICAgICAgICB5ZWFyOiBncm91cFswXS55ZWFyLFxyXG4gICAgICAgICAgdGVhbU51bWJlcjogdGVhbS5zaXplKClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5lbnRyaWVzKGRhdGEpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIOagueaNruS4lueVjOadr+WOhuWPsuaVsOaNruWcqOWcsOWbvuS4iuagh+WHuuS9jee9rlxyXG4gIGZ1bmN0aW9uIHBsb3RfcG9pbnQoZGF0YSkge1xyXG4gICAgLy8gVGhpcyBpcyB0aGUgbWFpbiBkYXRhIHdlIG5lZWQuXHJcbiAgICBsZXQgbmVzdGVkID0gbmVzdGVkRGF0YShkYXRhKTtcclxuXHJcbiAgICBwb2ludC5pbml0KG5lc3RlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIHJldHVybiBiLnZhbHVlLmF0dGVuZGFuY2UgLSBhLnZhbHVlLmF0dGVuZGFuY2U7XHJcbiAgICB9KSwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgcmV0dXJuIGRbXCJrZXlcIl07XHJcbiAgICB9LCBmdW5jdGlvbiAocG9pbnRzKSB7XHJcbiAgICAgIHBvaW50c1xyXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgdG9vbHRpcC51cGRhdGUoZDMuZXZlbnQucGFnZVgsIGQzLmV2ZW50LnBhZ2VZLCBkKTtcclxuICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IG5lc3RlZC5maWx0ZXIoZnVuY3Rpb24gKGQxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkMVtcImtleVwiXSkuZ2V0RnVsbFllYXIoKSA9PT0gcGFyc2VJbnQoZC5rZXkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBtYXAuaGlnaGxpZ2h0KGZpbHRlcmVkWzBdLnZhbHVlW1widGVhbXNcIl0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICB0b29sdGlwLm1vdmUoZDMuZXZlbnQucGFnZVgsIGQzLmV2ZW50LnBhZ2VZKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgIHRvb2x0aXAub2ZmKCk7XHJcbiAgICAgICAgICBtYXAucmVzZXQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBsZXQgeWVhcnMgPSBwb3B1bGF0ZV95ZWFyKDE5MzAsIDIwMTUsIDQpO1xyXG5cclxuICAgIGQzLnNlbGVjdChcIiN2aXMtYm94XCIpXHJcbiAgICAgIC5hcHBlbmQoXCJ1bFwiKVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwiYnV0dG9uX19saXN0LXJvd1wiKVxyXG4gICAgICAuc2VsZWN0QWxsKFwibGlcIilcclxuICAgICAgLmRhdGEoeWVhcnMpXHJcbiAgICAgIC5lbnRlcigpXHJcbiAgICAgIC5hcHBlbmQoXCJsaVwiKVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwiYnV0dG9uXCIpXHJcbiAgICAgIC5hcHBlbmQoXCJidXR0b25cIilcclxuICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICByZXR1cm4gZDtcclxuICAgICAgfSlcclxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgbGV0IGZpbHRlcmVkID0gbmVzdGVkLmZpbHRlcihmdW5jdGlvbiAoZDEpIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkMVtcImtleVwiXSkuZ2V0RnVsbFllYXIoKSA9PT0gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbWFwLmhpZ2hsaWdodChmaWx0ZXJlZFswXS52YWx1ZVtcInRlYW1zXCJdKTtcclxuICAgICAgICBwb2ludC5yZW5kZXIoZmlsdGVyZWQpO1xyXG4gICAgICB9KVxyXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWFwLnJlc2V0KCk7XHJcbiAgICAgICAgcG9pbnQucmVuZGVyKG5lc3RlZClcclxuICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICB0b29sdGlwLnVwZGF0ZShkMy5ldmVudC5wYWdlWCwgZDMuZXZlbnQucGFnZVksIGQpO1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBuZXN0ZWQuZmlsdGVyKGZ1bmN0aW9uIChkMSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkMVtcImtleVwiXSkuZ2V0RnVsbFllYXIoKSA9PT0gcGFyc2VJbnQoZC5rZXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFwLmhpZ2hsaWdodChmaWx0ZXJlZFswXS52YWx1ZVtcInRlYW1zXCJdKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdG9vbHRpcC5tb3ZlKGQzLmV2ZW50LnBhZ2VYLCBkMy5ldmVudC5wYWdlWSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICB0b29sdGlwLm9mZigpO1xyXG4gICAgICAgICAgICBtYXAucmVzZXQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRyYXcoZ2VvX2pzb24pIHtcclxuICAgIG1hcC5pbml0KGdlb19qc29uKTtcclxuICAgIGxldCBmb3JtYXQgPSBkMy50aW1lUGFyc2UoXCIlZC0lbS0lWSAoJUg6JU0gaClcIik7XHJcblxyXG4gICAgZDMudHN2KFwiLi4vYXNzZXRzL3dvcmxkX2N1cC93b3JsZF9jdXBfZ2VvLnRzdlwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICBsZXQgZGF0ZSA9IGZvcm1hdChkW1wiZGF0ZVwiXSk7XHJcbiAgICAgIGRbXCJhdHRlbmRhbmNlXCJdID0gK2RbXCJhdHRlbmRhbmNlXCJdO1xyXG4gICAgICBkW1wiZGF0ZVwiXSA9IGRhdGU7XHJcbiAgICAgIHJldHVybiBkO1xyXG4gICAgfSkudGhlbihkYXRhID0+IHtcclxuICAgICAgcGxvdF9wb2ludChkYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g6I635Y+WZ2VvSnNvbuWcsOWbvuaVsOaNrlxyXG4gIGQzLmpzb24oXCIuLi9hc3NldHMvd29ybGRfY291bnRyaWVzLmpzb25cIikudGhlbihkYXRhID0+IHtcclxuICAgIGRyYXcoZGF0YSk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=